Часть кода из предыдущего проекта. 

За объяснением тех или иных решений лучше обратиться ко мне, если комментарии или фраза "так надо по ТЗ" не вызывают понимания)
